<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="305px" preserveAspectRatio="none" style="width:550px;height:305px;background:#FFFFFF;" version="1.1" viewBox="0 0 550 305" width="550px" zoomAndPan="magnify"><title>VSS High Level Data Flow</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="202.959" x="175.1414" y="27.9951">VSS High Level Data Flow</text><rect fill="none" height="104.5313" style="stroke:#000000;stroke-width:1.5;" width="534.2417" x="10" y="148.8594"/><g><title>MobileDevice</title><rect fill="#000000" fill-opacity="0.00000" height="196.7969" width="8" x="69.9014" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="73" x2="73" y1="73.5938" y2="270.3906"/></g><g><title>VSS</title><rect fill="#000000" fill-opacity="0.00000" height="196.7969" width="8" x="258.1279" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="261.4526" x2="261.4526" y1="73.5938" y2="270.3906"/></g><g><title>Storage</title><rect fill="#000000" fill-opacity="0.00000" height="196.7969" width="8" x="495.8535" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="499.4653" x2="499.4653" y1="73.5938" y2="270.3906"/></g><g class="participant participant-head" data-participant="MobileDevice"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107.8027" x="20" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.8027" x="27" y="62.292">MobileDevice</text></g><g class="participant participant-tail" data-participant="MobileDevice"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107.8027" x="20" y="269.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.8027" x="27" y="289.3857">MobileDevice</text></g><g class="participant participant-head" data-participant="VSS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41.3506" x="241.4526" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.3506" x="248.4526" y="62.292">VSS</text></g><g class="participant participant-tail" data-participant="VSS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41.3506" x="241.4526" y="269.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.3506" x="248.4526" y="289.3857">VSS</text></g><g class="participant participant-head" data-participant="Storage"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68.7764" x="465.4653" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.7764" x="472.4653" y="62.292">Storage</text></g><g class="participant participant-tail" data-participant="Storage"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68.7764" x="465.4653" y="269.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.7764" x="472.4653" y="289.3857">Storage</text></g><g class="message" data-participant-1="MobileDevice" data-participant-2="VSS"><polygon fill="#181818" points="250.1279,100.7266,260.1279,104.7266,250.1279,108.7266,254.1279,104.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="73.9014" x2="256.1279" y1="104.7266" y2="104.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.9531" x="80.9014" y="99.6606">Authentication Request</text></g><g class="message" data-participant-1="VSS" data-participant-2="MobileDevice"><polygon fill="#181818" points="84.9014,129.8594,74.9014,133.8594,84.9014,137.8594,80.9014,133.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="78.9014" x2="261.1279" y1="133.8594" y2="133.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.7339" x="90.9014" y="128.7935">some(authToken)</text></g><path d="M10,148.8594 L86.624,148.8594 L86.624,155.9922 L76.624,165.9922 L10,165.9922 L10,148.8594" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="104.5313" style="stroke:#000000;stroke-width:1.5;" width="534.2417" x="10" y="148.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="25" y="161.9263">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="212.7329" x="101.624" y="161.0698">[for every payment sent/received]</text><g class="message" data-participant-1="MobileDevice" data-participant-2="VSS"><polygon fill="#181818" points="250.1279,183.125,260.1279,187.125,250.1279,191.125,254.1279,187.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="73.9014" x2="256.1279" y1="187.125" y2="187.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.2266" x="80.9014" y="182.0591">Update LN Channel State</text></g><g class="message" data-participant-1="VSS" data-participant-2="Storage"><polygon fill="#181818" points="487.8535,212.2578,497.8535,216.2578,487.8535,220.2578,491.8535,216.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="262.1279" x2="493.8535" y1="216.2578" y2="216.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213.7256" x="269.1279" y="211.1919">Atomic Update LN Channel State</text></g><g class="message" data-participant-1="VSS" data-participant-2="MobileDevice"><polygon fill="#181818" points="84.9014,241.3906,74.9014,245.3906,84.9014,249.3906,80.9014,245.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="78.9014" x2="261.1279" y1="245.3906" y2="245.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.3301" x="90.9014" y="240.3247">Success</text></g><!--SRC=[VOwn3i8m34JtV8L7610x0n828OR2G80zf4SRaSQbSOluUunOG48i7ivFzqw2HD39Mjg4ggO20oAjd3XQHxuRi-LpY5XX21wJ-GkSqQAN6ac2Tn8uqHwt7bcC_YRpJtv6cHkCdE87lYADZOdCBLsu8_Lq3shTez4codgc7Jp2WFAdyzYMJa35ZfQrIqb7Mj7WBRN2dQlKjn1kWly7anP-RxIzzyZP89LF]--></g></svg>