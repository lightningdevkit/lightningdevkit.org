(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{355:function(e,t,a){e.exports=a.p+"assets/img/cash-app-architecture.b24c7ec1.svg"},405:function(e,t,a){"use strict";a.r(t);var n=a(7),o=Object(n.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("Cash App allows users to instantly deposit and withdraw bitcoin over the lightning network. As an engineer on the Cash App Lightning Wallet team, I was very involved in the entire implementation process.")]),e._v(" "),t("p",[e._v("Cash App is the #1 Finance App in the app store – we have extremely high standards for product development and the infrastructure that powers all our cool features. We were looking for a solution that would ensure high reliability, high scalability, and a stellar developer experience. Cash App is the financial hub for millions of people and often the first place an individual acquires bitcoin. It’s important to have a slick user experience and robust infrastructure that can onboard many new users. As a publicly traded company we take security seriously and need the ability to customize our wallet implementation in order to adhere to strict standards.")]),e._v(" "),t("p",[e._v("We chose LDK for various reasons over other implementations. It provided us with a lot of customizability and flexibility. The "),t("a",{attrs:{href:"https://github.com/lightningdevkit/ldk-garbagecollected",target:"_blank",rel:"noopener noreferrer"}},[e._v("Java bindings"),t("OutboundLink")],1),e._v(" let us develop in Kotlin, which is the preferred language for backend services. We also have a great working relationship with the "),t("a",{attrs:{href:"https://spiral.xyz/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Spiral"),t("OutboundLink")],1),e._v(" folks, making it easy to collaborate on more advanced feature requests such as phantom invoices.")]),e._v(" "),t("h1",{attrs:{id:"what-we-did"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#what-we-did"}},[e._v("#")]),e._v(" What we did")]),e._v(" "),t("p",[e._v("LDK allowed us to develop a scalable lightning node infrastructure. Cash App runs multiple wallet nodes and has strict parameters around opening channels and connecting to peers. We have logic that does advanced probing in the background in order to ensure an up-to-date snapshot of liquidity on the lightning network.")]),e._v(" "),t("figure",[t("img",{attrs:{src:a(355),alt:"CashApp architecture"}})]),e._v(" "),t("p",[e._v("Probing is done before every send, allowing us to pre-fetch a route and execute the send once the customer confirms. LDK’s "),t("a",{attrs:{href:"https://lightningdevkit.org/blog/introducing-phantom-node-payments/",target:"_blank",rel:"noopener noreferrer"}},[e._v("phantom node"),t("OutboundLink")],1),e._v(" feature makes it possible to generate invoices that can be claimed by more than one node. We use MySQL to save our channel state data + node metadata in order to quickly shut down and start up nodes at will on different servers. Additionally, LDK lets us run AB tests on different pathfinding algorithms.")]),e._v(" "),t("h1",{attrs:{id:"results"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#results"}},[e._v("#")]),e._v(" Results")]),e._v(" "),t("p",[e._v("LDK made it possible to relatively quickly build an easy-to-use lightning wallet while adhering to the complicated constraints Cash App faces as a publicly traded company with tens of millions of users. Users can now instantly deposit and withdraw bitcoin to Cash App over lightning.")]),e._v(" "),t("p",[e._v("To learn more check out this "),t("a",{attrs:{href:"https://www.youtube.com/watch?v=kbhL5RqL8Aw",target:"_blank",rel:"noopener noreferrer"}},[e._v("presentation"),t("OutboundLink")],1),e._v(" at btc++ explaining some of the trade-offs the Cash App team had to think about when comparing LDK to other solutions.")])])}),[],!1,null,null,null);t.default=o.exports}}]);